(this["webpackJsonppareteo-80-20-law"]=this["webpackJsonppareteo-80-20-law"]||[]).push([[0],{252:function(e,t,n){e.exports=n(391)},390:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var a,i=n(1),r=n.n(i),o=n(97),c=n.n(o),l=n(10),s=n(25),u=n(208),m=n(414),d=n(413),p=function(){return{type:"PAUSE_SIMULATION"}},T=function(e){var t=e.nodeCount,n=e.maxTicks,a=e.stepTime;return function(e,i){e({type:"START_SIMULATION",payload:{nodeCount:t,maxTicks:n,stepTime:a}}),t<=1e3&&e((function(e,t){e({type:"UPDATE_VISUALISATION_DATA"}),setTimeout((function n(){var a=t().simulation,i=a.running,r=a.nodeCount;i&&r<=1e3&&(e({type:"UPDATE_VISUALISATION_DATA"}),setTimeout(n,1e3))}),1e3)})),setTimeout((function t(){var n=i().simulation,a=n.currentTick,r=n.maxTicks,o=n.running,c=n.stepTime;o&&a<r&&(e({type:"TICK_SIMULATION"}),setTimeout(t,c))}),a)}},f=function(){return{type:"RESET_SIMULATION"}},g=function(){return function(e,t){e({type:"ADVANCE_TO_COMPLETION"});t().running||function n(){var a=t().simulation,i=a.currentTick,r=a.maxTicks,o=a.running,c=a.stepTime;o&&i<r&&(e({type:"TICK_SIMULATION"}),setTimeout(n,c))}()}},b=function(e){for(var t=e.associations,n=t.length,a=new Array(n),i=function(e){for(;t[e]!==e;)if(e=t[e],a[e])return a[e];return e},r={},o=0;o<n;++o){var c=i(o);a[o]=c,r[c]||(r[c]=0),++r[c]}var l=[],s=0;return Object.values(r).forEach((function(e){l.push({category:"".concat(s),value:e,valueColor:"hsl(8, 70%, 50%)"}),++s})),l},E=function(e){var t=e.maxTicks,n=e.nodeCount,a=e.stepTime;return Object.assign({},{maxTicks:t?"":"Please enter a simulation length in ticks"},{nodeCount:n?"":"Please enter the number of items in experiment"},{stepTime:a?"":"Please enter the length of each step in milliseconds"})},h=function(e){var t=e.simulation;return{data:t.graphData,associations:t.associations}},v=function(e){var t="field ".concat(e.meta.error&&e.meta.touched?"error":"");return r.a.createElement("div",{className:t},r.a.createElement("label",null,e.label),r.a.createElement(e.controlType,Object.assign({type:e.type},e.input)),e.meta.error&&e.meta.touched?r.a.createElement("div",{className:"ui error message"},e.meta.error):null)},y=(a=function(e){var t,n=e.handleSubmit,a=e.startSimulation,i=e.pauseSimulation,o=e.resetSimulation,c=e.advanceToCompletion,l=(e.data,e.associations);return r.a.createElement("form",{className:"ui error form"},r.a.createElement("h3",null,"Simulation Parameters"),r.a.createElement("div",{className:"ui field"},r.a.createElement(m.a,{name:"maxTicks",component:v,type:"text",controlType:"input",label:"Simulation length (in trials)"}),r.a.createElement(m.a,{name:"nodeCount",component:v,type:"text",controlType:"input",label:"Number of items in simulation"}),r.a.createElement(m.a,{name:"stepTime",component:v,type:"text",controlType:"input",label:"Time in milliseconds per step"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"ui padded segment"},r.a.createElement("button",{className:"ui primary button",onClick:n(a)},r.a.createElement("i",{className:"play icon"}),"Start"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui labeled icon button",onClick:n(i)},r.a.createElement("i",{className:"pause icon"}),"Pause"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui labeled icon button",onClick:n(c)},r.a.createElement("i",{className:"right arrow icon"}),"Complete"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui labeled icon button",onClick:n(o)},r.a.createElement("i",{className:"redo icon"}),"Restart"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("button",{className:"ui labeled icon button",onClick:(t=function(){!function(e){var t="data:text/csv;charset=utf-8,'groupId','memberCount'\r\n";e.sort((function(e,t){return e.value<t.value})).forEach((function(e){var n=e.category,a=e.value;return t+="".concat(n,",").concat(a,"\r\n")})),window.open(encodeURI(t))}(b(l))},function(e){e.preventDefault(),t(e)})},r.a.createElement("i",{className:"download icon"}),"Download")))},Object(d.a)({form:"simulation",validate:E})(Object(s.b)(h,{startSimulation:T,pauseSimulation:p,resetSimulation:f,advanceToCompletion:g})(a))),O=n(210),k=(n(390),Object(s.b)((function(e){var t=e.simulation;return{currentTick:t.currentTick,maxTick:t.maxTicks,data:t.graphData,running:t.running,display:t.display}}))((function(e){var t=e.data,n=e.currentTick,a=e.maxTick,o=e.running,c=e.display,l=Object(i.useRef)(),s=l.current?l.current.parentNode.offsetWidth:500;return r.a.createElement("div",{className:"graphContainer",ref:l,style:{width:s}},o?r.a.createElement("div",null,r.a.createElement("h4",null,"Progress: ",n," / ",a)):null,t&&t.length>200?r.a.createElement("h3",null,"Too many categories to render..."):null,c&&t&&t.length<=200?r.a.createElement(O.a,{data:t,indexBy:"category",keys:["value"],margin:{top:50,right:130,bottom:50,left:60},padding:.3,colors:{scheme:"category10"},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"#38bcb2",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"#eed312",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"fries"},id:"dots"},{match:{id:"sandwich"},id:"lines"}],borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"groups",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"count",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15}):null)}))),S=function(){return r.a.createElement("div",{className:"ui app container"},r.a.createElement("h1",null,"Pareteo Simulation"),r.a.createElement("div",{className:"ui two grid"},r.a.createElement("div",{className:"ui four wide column"},r.a.createElement(y,null)),r.a.createElement("div",{className:"ui twelve wide column"},r.a.createElement(k,null))))},N=n(418),I=n(19),A=function(e){for(var t=e.nodeCount,n=new Array(t),a=0;a<t;++a)n[a]=a;return{associations:n}},C=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Math.floor(e*Math.random()),a=0;n===t&&(++a,n=Math.floor(e*Math.random()),!(a>1e3)););return n},x=function(e,t){for(;e[t]!==t;)t=e[t];return t},_=function(e){var t=e.associations,n=t.length,a=C(n),i=C(n,a),r=x(t,a),o=x(t,i);r!==o&&(t[r]=o)},j={currentTick:0,maxTicks:1e3,running:!1,stepTime:1e3,nodeCount:0,associations:[],display:!0},w=Object(l.c)({form:N.a,simulation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"START_SIMULATION":var i=a.maxTicks,r=a.nodeCount,o=a.stepTime,c=A({nodeCount:r});return{currentTick:0,running:!0,maxTicks:i,nodeCount:r,stepTime:o,display:!0,associations:c};case"TICK_SIMULATION":var l=e.maxTicks,s=e.currentTick,u=e.running,m=e.associations;return u?s===l-1?Object(I.a)(Object(I.a)({},e),{},{display:!0,graphData:b(m),running:!1}):(_(m),Object(I.a)(Object(I.a)({},e),{},{currentTick:s+1})):e;case"RESET_SIMULATION":var d=A({nodeCount:e.nodeCount});return Object(I.a)(Object(I.a)({},e),{},{display:!0,running:!1,currentTick:0,associations:d,graphData:b(d)});case"UPDATE_VISUALISATION_DATA":var p=e.associations;return Object(I.a)(Object(I.a)({},e),{},{graphData:b(p)});case"ADVANCE_TO_COMPLETION":return Object(I.a)(Object(I.a)({},e),{},{running:!0,display:!1,stepTime:0});case"PAUSE_SIMULATION":return Object(I.a)(Object(I.a)({},e),{},{running:!1});default:return e}}}),D="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,P=Object(l.e)(w,D(Object(l.a)(u.a)));c.a.render(r.a.createElement(s.a,{store:P},r.a.createElement(S,null)),document.getElementById("root"))}},[[252,1,2]]]);
//# sourceMappingURL=main.37afa49f.chunk.js.map